<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <title>Key Trustee Quick Start Guide</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/themes/prism.min.css"
      rel="stylesheet"
    />
    <style>
      @font-face {
        font-family: "HyliaSerifBeta";
        src: url("assets/webfonts/HyliaSerifBeta-Regular.otf")
          format("opentype");
      }

      .logo-svg {
        width: 100%;
        height: auto;
        max-width: 960px;
        margin: 0 auto;
      }

      .logo-text {
        font-family: "HyliaSerifBeta", sans-serif;
        font-size: 64px;
        fill: url(#gold-gradient);
        stroke: black;
        stroke-width: 3px;
        paint-order: stroke fill;
      }

      .content {
        max-width: 960px;
        margin: 0 auto;
        padding: 2em;
      }

      .steps {
        margin-bottom: 2em;
      }

      .steps h3 {
        margin-bottom: 0.5em;
      }

      .steps p {
        margin: 0.5em 0 1em;
      }

      .toggle-section {
        cursor: pointer;
        margin: 0;
        background-color: #f7f7f7;
        padding: 0.5em;
      }

      .toggle-container {
        margin-bottom: 1em;
      }

      .toggle-content {
        display: none;
        margin: 0;
        background-color: #e9e9e9;
        border-left: 5px solid #007bff;
      }
    </style>
  </head>
  <body class="homepage is-preload">
    <div id="page-wrapper">
      <!-- Header -->
      <section id="header" class="header-background">
        <!-- Logo -->
        <svg
          viewBox="0 0 500 100"
          preserveAspectRatio="xMinYMin meet"
          class="logo-svg"
        >
          <defs>
            <linearGradient
              id="gold-gradient"
              x1="0%"
              y1="0%"
              x2="0%"
              y2="100%"
            >
              <stop offset="0%" style="stop-color: #ffd700; stop-opacity: 1" />
              <stop
                offset="100%"
                style="stop-color: #a86d00; stop-opacity: 1"
              />
            </linearGradient>
          </defs>

          <text x="75" y="75" class="logo-text">Key Trustee</text>
        </svg>
        <div class="container">
          <div class="row">
            <div class="col-xl-12" style="text-align: left">
              <h1 style="text-align: center">Quick Start</h1>
              <hr />
              <div class="steps">
                <!-- <p>First, install the app on your device:</p>
                <ul>
                  <li><a href="#">Download for Android</a></li>
                  <li><a href="#">Download for iOS</a></li>
                </ul> -->
              </div>
              <div class="steps">
                <h3>For Application Integrators:</h3>
                <ol>
                  <li>
                    Log into
                    <a href="https://app.keytrustee.org/">Key Trustee</a> and
                    create an entry on the Applications screen in the developer
                    section with your application's name, allowed hosts, and
                    OAuth client IDs, and set the application to active. Record
                    the application ID for later use.
                  </li>
                  <li>
                    Update your service to use the Key Trustee API endpoint:
                    <br /><em>https://app.keytrustee.org/api/completions</em>
                  </li>
                  <li>
                    Add the following headers to your requests:
                    <ul>
                      <li>
                        <strong>Authorization:</strong> Bearer
                        <code>{idToken}</code>
                      </li>
                      <li>
                        <strong>X-Auth-Token:</strong> The user's auth token.
                      </li>
                      <li>
                        <strong>X-KeyTrustee-Application-Id:</strong> The
                        application ID (as a number) for your application in Key
                        Trustee.
                      </li>
                    </ul>
                  </li>
                  <li>
                    Use the user's OAuth id token in the Authorization header
                    instead of your API key. Optionally, use the
                    <em>strong_model</em> and <em>weak_model</em> parameters to
                    optimize model selection based on the prompt.
                  </li>
                </ol>
                <div
                  class="toggle-section"
                  onclick="toggleContent('python-code')"
                >
                  <strong>Show Python Example (requests)</strong>
                </div>
                <div class="toggle-container">
                  <div id="python-code" class="toggle-content">
                    <pre><code class="language-python">
import requests

url = "https://app.keytrustee.org/"
headers = {
    "Authorization": f"Bearer {idToken}",
    "X-Auth-Token": authToken,
    "X-KeyTrustee-Application-Id": 2,  # Replace with your actual application ID
    "Content-Type": "application/json"
}
data = {
    "messages": [{"role": "user", "content": inputText}],
    "model": "gpt-4o-mini-2024-07-18",
    "stream": streaming
}

response = requests.post(url, headers=headers, json=data)
print(response.json())
                  </code></pre>
                  </div>
                </div>
                <div
                  class="toggle-section"
                  onclick="toggleContent('openai-python-code')"
                >
                  <strong>Show Python Example (OpenAI SDK)</strong>
                </div>
                <div class="toggle-container">
                  <div id="openai-python-code" class="toggle-content">
                    <pre><code class="language-python">
import openai

# Set up the OpenAI SDK to use the custom API endpoint
openai.api_base = "https://app.keytrustee.org/api"
openai.api_key = None  # Not required as we use OAuth tokens
headers = {
    "Authorization": f"Bearer {idToken}",
    "X-Auth-Token": authToken,
    "X-KeyTrustee-Application-Id": 2  # Replace with your actual application ID
}

response = openai.ChatCompletion.create(
    model="gpt-4o-mini-2024-07-18",
    messages=[{"role": "user", "content": inputText}],
    headers=headers,
    stream=streaming
)

for chunk in response:
    print(chunk)
                  </code></pre>
                  </div>
                </div>
                <div
                  class="toggle-section"
                  onclick="toggleContent('javascript-code')"
                >
                  <strong>Show JavaScript Example</strong>
                </div>
                <div class="toggle-container">
                  <div id="javascript-code" class="toggle-content">
                    <pre><code class="language-javascript">
const response = await fetch("https://app.keytrustee.org/api/completions", {
  method: "POST",
  headers: {
    Authorization: `Bearer ${idToken}`,
    "X-Auth-Token": authToken,
    "X-KeyTrustee-Application-Id": 2,  // Replace with your actual application ID
    "Content-Type": "application/json",
  },
  body: JSON.stringify({
    messages: [{ role: "user", content: inputText }],
    model: "gpt-4o-mini-2024-07-18",
    stream: streaming,
  }),
});

const result = await response.json();
console.log(result);
                  </code></pre>
                  </div>
                </div>
              </div>
              <div class="steps">
                <h3>For Users:</h3>
                <ol>
                  <li>
                    Log into the app with your primary identity provider. Ensure
                    your keys are available by adding any additional identity
                    providers on the Identities page.
                  </li>
                  <li>
                    Optionally, add your credit card information to purchase
                    credits. Without credits, you'll need API keys for any AI
                    services.
                  </li>
                  <li>
                    Add keys for the services you wish to use on the Provider
                    screen.
                  </li>
                  <li>
                    Enable AI in your applications on the Application screen of
                    the user section. Make sure to select a model from a
                    provider with added keys for your applications if you
                    haven't added credits.
                  </li>
                </ol>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Footer -->
      <section id="footer">
        <div class="container">
          <div id="copyright">
            &copy; 2024 Sibylline Software. All rights reserved.
          </div>
        </div>
      </section>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-python.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.28.0/components/prism-javascript.min.js"></script>
    <script>
      function toggleContent(id) {
        var content = document.getElementById(id);
        if (content.style.display === "none" || content.style.display === "") {
          content.style.display = "block";
        } else {
          content.style.display = "none";
        }
      }
    </script>
  </body>
</html>
